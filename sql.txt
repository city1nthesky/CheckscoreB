.tables
.schema
.exit


CREATE TABLE USERINFO(WXID TEXT NOT NULL, PHONE TEXT NOT NULL, NAME TEXT NOT NULL, ROLE TEXT NOT NULL, PAY TEXT NOT NULL);
CREATE TABLE UNBINDINFO(ID INTEGER PRIMARY KEY AUTOINCREMENT, WXID TEXT NOT NULL, UNBINDCOUNT INTEGER);
CREATE TABLE PAYINFO(ID INTEGER PRIMARY KEY AUTOINCREMENT, WXID TEXT NOT NULL, STARTIME TEXT NOT NULL, ENDTIME TEXT NOT NULL);
SELECT * FROM USERINFO;
DELETE FROM userinfo WHERE WXID = 'oz1Xn4opoA19fTqSCPciZXcLwWmc';
DROP TABLE USERINFO;
UPDATE UNBINDINFO SET UNBINDCOUNT = 0 WHERE WXID = 'oz1Xn4opoA19fTqSCPciZXcLwWmc'

SELECT COUNT(*) FROM USERINFO;
SELECT COUNT(*) FROM USERINFO WHERE WXID IS NULL;
SELECT COUNT(DISTINCT WXID) FROM USERINFO;
DELETE FROM USERINFO WHERE WXID IS NULL OR ROWID NOT IN (SELECT MIN(ROWID) FROM USERINFO GROUP BY WXID);

CREATE TABLE UNBINDINFO2(
  ID INTEGER PRIMARY KEY AUTOINCREMENT,
  WXID TEXT NOT NULL,
  UNBINDCOUNT INTEGER DEFAULT 2
);
INSERT INTO UNBINDINFO2(WXID) SELECT WXID FROM USERINFO;
SELECT * FROM UNBINDINFO2;
